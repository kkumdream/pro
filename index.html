<!doctype html>
<html lang="ko"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>노원구 꿈드림 검정고시 문제 풀이</title>
<style>
:root{--bg:#0b0b0b;--panel:#121212;--fg:#f5f5f5;--muted:#a3a3a3;--border:#2a2a2a;--good:#22c55e;--bad:#ef4444}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,Apple SD Gothic Neo,Noto Sans KR,Arial}
.wrap{max-width:960px;margin:0 auto;padding:16px}
h1{margin:0 0 8px;font-size:22px}
.tabs{display:flex;gap:8px;margin:8px 0 16px}
.tabbtn{flex:1;border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--panel);color:var(--fg);font-weight:700;cursor:pointer}
.tabbtn.active{outline:2px solid #333}
.card{border:1px solid var(--border);border-radius:16px;padding:16px;background:var(--panel)}
.row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
select,.btn{border:1px solid var(--border);background:#0f0f0f;color:var(--fg);border-radius:10px;padding:10px 12px}
.btn.primary{background:#1f1f1f;border-color:#444}
.list a{display:block;padding:12px;border:1px solid var(--border);border-radius:12px;color:var(--fg);text-decoration:none;background:#0f0f0f}
.list a+a{margin-top:8px}
.choice{display:flex;gap:10px;align-items:flex-start;padding:10px;border:1px solid var(--border);border-radius:12px;margin-top:8px;cursor:pointer;background:#0f0f0f}
.choice.correct{border-color:var(--good)}.choice.wrong{border-color:var(--bad)}
.section{margin-top:12px}.muted{color:var(--muted)}.hidden{display:none}
.fig img{max-width:100%;border:1px solid var(--border);border-radius:8px;margin-top:8px;cursor:zoom-in}
.topnav{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
</style></head>
<body><div class="wrap">
  <h1>노원구 꿈드림 검정고시 문제 풀이</h1>
  <div class="tabs">
    <button id="tabOne" class="tabbtn active">한 문제씩 풀기</button>
    <button id="tabExam" class="tabbtn">시험으로 풀기</button>
  </div>

  <section class="card" id="screenSelect">
    <div class="row">
      <button class="btn primary" id="btnSearch">검색</button>
    </div><hr/>
    <div class="list" id="resultList"></div>
  </section>

  <section class="card hidden" id="screenOne">
    <div class="topnav"><strong id="metaOne"></strong><button class="btn" id="homeFromOne">홈으로</button></div>
    <div id="idxOne" class="muted"></div>
    <div id="stemOne" style="white-space:pre-wrap;margin-top:12px"></div>
    <div id="figsOne" class="section fig"></div>
    <div id="choicesOne"></div>
    <div class="row section"><button class="btn" id="prevOne">◀ 이전</button><button class="btn" id="nextOne">다음 ▶</button></div>
    <div id="judgeOne" class="section muted"></div>
    <div id="explainOne" class="section" style="white-space:pre-wrap"></div>
  </section>

  <section class="card hidden" id="screenExam">
    <div class="topnav"><strong id="metaExam"></strong><button class="btn" id="homeFromExam">홈으로</button><button class="btn" id="gradeTop">채점하기</button></div>
    <div id="examList" class="section"></div>
    <div class="section"><button class="btn" id="gradeBottom">채점하기</button></div>
    <div id="examResult" class="section hidden"></div>
  </section>
</div>

<script>
let MODE='one';
const tabOne=document.getElementById('tabOne'), tabExam=document.getElementById('tabExam');
const screenSelect=document.getElementById('screenSelect'), screenOne=document.getElementById('screenOne'), screenExam=document.getElementById('screenExam');
function setActive(el){[tabOne,tabExam].forEach(b=>b.classList.remove('active'));el.classList.add('active');}
function home(){screenSelect.classList.remove('hidden');screenOne.classList.add('hidden');screenExam.classList.add('hidden');}
tabOne.onclick=()=>{MODE='one';setActive(tabOne);home();};
tabExam.onclick=()=>{MODE='exam';setActive(tabExam);home();};

const btnSearch=document.getElementById('btnSearch'), resultList=document.getElementById('resultList');
btnSearch.onclick=()=>{resultList.innerHTML='';const a=document.createElement('a');a.href='#';a.textContent='[기출] 2025 고졸 수학';a.onclick=(e)=>{e.preventDefault();openSet('data/2025/2차/고졸/수학.json');};resultList.appendChild(a);};

let CURRENT=null, cur=0, userAns=[];
function openSet(path){ fetch(path).then(r=>r.json()).then(js=>{CURRENT=js; if(MODE==='one') openOne(); else openExam();});}

const metaOne=document.getElementById('metaOne'), idxOne=document.getElementById('idxOne'), stemOne=document.getElementById('stemOne'), figsOne=document.getElementById('figsOne'), choicesOne=document.getElementById('choicesOne'), judgeOne=document.getElementById('judgeOne'), explainOne=document.getElementById('explainOne');
document.getElementById('homeFromOne').onclick=home;
document.getElementById('homeFromExam').onclick=home;
document.getElementById('gradeTop').onclick=grade; document.getElementById('gradeBottom').onclick=grade;

function renderFigures(container,q){container.innerHTML=''; if(!q.figures) return; q.figures.forEach(fig=>{if(!fig.src) return; const img=document.createElement('img'); img.src=fig.src; img.alt=fig.caption||''; img.onclick=()=>window.open(fig.src,'_blank'); container.appendChild(img); if(fig.caption){const c=document.createElement('div'); c.className='muted'; c.textContent=fig.caption; container.appendChild(c);}});}

function openOne(){screenSelect.classList.add('hidden');screenExam.classList.add('hidden');screenOne.classList.remove('hidden');cur=0;userAns=new Array(CURRENT.questions.length).fill(null);renderOne();}
function renderOne(){const q=CURRENT.questions[cur]; metaOne.textContent=`${CURRENT.meta.year} ${CURRENT.meta.level} ${CURRENT.meta.subject}`; idxOne.textContent=`문항 ${q.number} / 총 ${CURRENT.questions.length}`; stemOne.textContent=q.stem; renderFigures(figsOne,q); choicesOne.innerHTML=''; judgeOne.textContent=''; explainOne.textContent='';
  q.choices.forEach((c,i)=>{const div=document.createElement('div'); div.className='choice'; div.innerHTML=`<div class="btn" style="width:34px;text-align:center">${i+1}</div><div style="flex:1">${c}</div>`; div.onclick=()=>{userAns[cur]=i; const ok=(i===q.answerIndex); judgeOne.textContent=ok?'정답입니다.':`오답입니다. 정답은 ${q.answerIndex+1}번`; judgeOne.style.color=ok?'var(--good)':'var(--bad)'; explainOne.textContent=q.explanation||''; [...choicesOne.children].forEach(el=>el.style.outline=''); div.style.outline='2px solid #333';}; choicesOne.appendChild(div);});
  document.getElementById('prevOne').disabled=(cur===0); document.getElementById('nextOne').disabled=(cur===CURRENT.questions.length-1);
}
document.getElementById('prevOne').onclick=()=>{if(cur>0){cur--;renderOne();}}; document.getElementById('nextOne').onclick=()=>{if(cur<CURRENT.questions.length-1){cur++;renderOne();}};

const metaExam=document.getElementById('metaExam'), examList=document.getElementById('examList'), examResult=document.getElementById('examResult');
function openExam(){screenSelect.classList.add('hidden');screenOne.classList.add('hidden');screenExam.classList.remove('hidden'); userAns=new Array(CURRENT.questions.length).fill(null); metaExam.textContent=`${CURRENT.meta.year} ${CURRENT.meta.level} ${CURRENT.meta.subject}`; examList.innerHTML=''; examResult.classList.add('hidden'); examResult.innerHTML='';
  CURRENT.questions.forEach((q,qi)=>{ const wrap=document.createElement('div'); wrap.className='section'; wrap.id='q'+q.number;
    wrap.innerHTML=`<div><strong>문항 ${q.number}</strong></div><div style="white-space:pre-wrap;margin-top:6px">${q.stem}</div><div class='section fig' id='figs_ex_${q.number}'></div>`;
    const figc=wrap.querySelector('#figs_ex_'+q.number); if(q.figures){ q.figures.forEach(fig=>{ if(!fig.src) return; const img=document.createElement('img'); img.src=fig.src; figc.appendChild(img); if(fig.caption){ const c=document.createElement('div'); c.className='muted'; c.textContent=fig.caption; figc.appendChild(c);} }); }
    const box=document.createElement('div'); box.style.marginTop='6px';
    q.choices.forEach((c,i)=>{ const div=document.createElement('div'); div.className='choice'; div.innerHTML=`<div class="btn" style="width:34px;text-align:center">${i+1}</div><div style="flex:1">${c}</div>`; div.onclick=()=>{userAns[qi]=i; [...box.children].forEach(el=>el.style.outline=''); div.style.outline='2px solid #333';}; box.appendChild(div); });
    const exp=document.createElement('div'); exp.className='muted hidden'; exp.id='exp'+q.number;
    wrap.appendChild(box); wrap.appendChild(exp); examList.appendChild(wrap);
  });
}

function grade(){ let correct=0, wrong=[]; CURRENT.questions.forEach((q,i)=>{ if(userAns[i]===q.answerIndex) correct++; else wrong.push(q.number);}); const score=Math.round(100*correct/CURRENT.questions.length);
  examResult.classList.remove('hidden'); examResult.innerHTML=`<hr/><div><strong>점수: ${score}점</strong> (정답 ${correct}/${CURRENT.questions.length})</div>`;
  if(wrong.length){ const row=document.createElement('div'); row.style.marginTop='8px'; row.innerHTML='틀린 문항: '; wrong.forEach(n=>{ const b=document.createElement('button'); b.className='btn'; b.textContent=String(n); b.onclick=()=>{ const q=CURRENT.questions.find(qq=>qq.number===n); const exp=document.getElementById('exp'+n); if(q && exp){ exp.classList.remove('hidden'); exp.textContent=`정답: ${q.answerIndex+1}번\n해설: ${q.explanation||''}`; document.getElementById('q'+n).scrollIntoView({behavior:'smooth',block:'start'});} }; row.appendChild(b); }); examResult.appendChild(row); } else { examResult.innerHTML+=`<div class="muted">틀린 문제가 없습니다.</div>`; } }
</script></body></html>